<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data Processing</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />
<!-- Gambling Themed Favicon (Slot Machine Emoji) -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ°</text></svg>">

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Slot Machine</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="home.html">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="data.html">Data Processing</a>
</li>
<li>
  <a href="analysis.html">Analysis</a>
</li>
<li>
  <a href="report.html">Project Report</a>
</li>
<li>
  <a href="about.html">About Us</a>
</li>
<li>
  <a href="https://github.com/zakbillo/sports-betting">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Data Processing</h1>

</div>


<div id="data-sources" class="section level3">
<h3>Data Sources</h3>
<ul>
<li>Sports gambling data was obtained from <a
href="https://rg.org/statistics/us">Research Groundâ€™s US sports betting
data</a> (2018-2024).</li>
<li>Demographic data was obtained from publicly available <a
href="https://www.census.gov/programs-surveys/acs/data.html">American
Community Survey data</a> (2024).</li>
</ul>
</div>
<div id="gambling-data" class="section level2">
<h2>Gambling Data</h2>
<p>Web Scraping:</p>
<p>Scrape the current 2024 state sports gambling revenue and 2025 growth
projections directly from the web</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">&quot;https://rg.org/statistics/us&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>gambling_html <span class="ot">=</span> <span class="fu">read_html</span>(url)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>gambling_html <span class="sc">|&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="fu">html_table</span>()</span></code></pre></div>
<pre><code>## [[1]]
## # A tibble: 40 Ã— 5
##    State       Handle          Revenue        Hold   Taxes       
##    &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;       
##  1 Arizona     $7,959,647,194  $427,397,087   5.53%  $42,739,709 
##  2 Arkansas    -               $107,275,202   -      $13,945,776 
##  3 Colorado    $6,187,564,044  $475,176,731   7.87%  $31,934,112 
##  4 Connecticut $2,188,745,557  $187,349,516   8.67%  $25,760,559 
##  5 Delaware    $216,240,459    $14,585,100    6.99%  $8,474,813  
##  6 Florida     -               -              -      -           
##  7 Illinois    $14,016,684,933 $1,866,642,282 13.52% $280,390,692
##  8 Indiana     $5,212,332,663  $484,278,308   9.48%  $46,245,605 
##  9 Iowa        $2,770,339,580  $218,482,781   8.07%  $14,747,588 
## 10 Kansas      $2,503,492,581  $145,263,244   5.96%  $13,873,150 
## # â„¹ 30 more rows
## 
## [[2]]
## # A tibble: 12 Ã— 5
##    Month          Handle          Revenue        Hold   Taxes       
##    &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;       
##  1 January 2025   $15,721,477,197 $1,650,645,417 11.21% $354,670,341
##  2 February 2025  $12,382,871,791 $1,239,102,150 9.69%  $262,962,206
##  3 March 2025     $15,481,330,121 $996,986,477   6.75%  $220,983,072
##  4 April 2025     $12,792,017,473 $1,164,871,656 9.35%  $260,844,090
##  5 May 2025       $12,787,489,120 $1,430,346,654 11.14% $325,897,450
##  6 June 2025      $10,010,350,813 $1,559,587,432 12.69% $285,024,313
##  7 July 2025      $8,811,387,460  $963,982,575   10.81% $208,715,680
##  8 August 2025    $10,765,611,897 $1,164,308,572 11.98% $254,251,721
##  9 September 2025 $15,438,117,768 $1,228,482,775 8.65%  $264,083,960
## 10 October 2025   $13,859,996,349 $1,185,962,986 11.70% $284,880,585
## 11 November 2025  -               -              -      -           
## 12 Total          -               -              -      -           
## 
## [[3]]
## # A tibble: 38 Ã— 1
##    X1                                
##    &lt;chr&gt;                             
##  1 Arizona Sports Betting Revenue    
##  2 Arkansas Sports Betting Revenue   
##  3 Colorado Sports Betting Revenue   
##  4 Connecticut Sports Betting Revenue
##  5 Delaware Sports Betting Revenue   
##  6 Florida Sports Betting Revenue    
##  7 Illinois Sports Betting Revenue   
##  8 Indiana Sports Betting Revenue    
##  9 Iowa Sports Betting Revenue       
## 10 Kansas Sports Betting Revenue     
## # â„¹ 28 more rows
## 
## [[4]]
## # A tibble: 3 Ã— 3
##   Challenge             `Key Stat (2025)`                 Impact on Sports Betâ€¦Â¹
##   &lt;chr&gt;                 &lt;chr&gt;                             &lt;chr&gt;                 
## 1 Regulatory Compliance 39 U.S. states + Washington D.C.â€¦ Increases operationalâ€¦
## 2 Gambling Addiction    2.5M U.S. adults have severe gamâ€¦ Drives demand for strâ€¦
## 3 High Tax Rates        51% GGR tax in NY, RI, NH         Limits profitability,â€¦
## # â„¹ abbreviated name: Â¹â€‹`Impact on Sports Betting Industry`
## 
## [[5]]
## # A tibble: 6 Ã— 3
##   Trend                 `2025 Highlight`                         `What It Means`
##   &lt;chr&gt;                 &lt;chr&gt;                                    &lt;chr&gt;          
## 1 Mobile Dominance      Over 80% of online gambling via mobile   Convenience, aâ€¦
## 2 Bettor Engagement     20% of U.S. adults bet on sports         Growing user bâ€¦
## 3 Popular Formats       Parlays = 27% of bets                    Multi-leg betsâ€¦
## 4 Media Integration     ESPN BETâ€™s FanCenter syncs fantasy withâ€¦ Seamless conveâ€¦
## 5 Major Event Impact    Super Bowl handle hit $1.39B             Live events reâ€¦
## 6 Demographic Expansion Bettor participation rose to 26%, driveâ€¦ Market broadenâ€¦
## 
## [[6]]
## # A tibble: 3 Ã— 3
##   Technology                   `Use in Sports Betting`    Impact on Bettors &amp; â€¦Â¹
##   &lt;chr&gt;                        &lt;chr&gt;                      &lt;chr&gt;                 
## 1 Artificial Intelligence (AI) Analyzes player performanâ€¦ Enables more accurateâ€¦
## 2 Machine Learning &amp; Big Data  Processes massive datasetâ€¦ Shifts betting from iâ€¦
## 3 Blockchain &amp; Web3            Creates transparent, deceâ€¦ Improves trust, automâ€¦
## # â„¹ abbreviated name: Â¹â€‹`Impact on Bettors &amp; Industry`
## 
## [[7]]
## # A tibble: 5 Ã— 3
##   Measure             Description                                         Impact
##   &lt;chr&gt;               &lt;chr&gt;                                               &lt;chr&gt; 
## 1 AI Risk Detection   Uses machine learning to identify harmful betting â€¦ Enablâ€¦
## 2 Loss Limits         Caps on daily, weekly, or monthly spending          Preveâ€¦
## 3 Self-Exclusion      Lets bettors block access for set periods           Suppoâ€¦
## 4 Education Campaigns Public awareness on gambling risks                  Reducâ€¦
## 5 Cooling-Off Periods Mandatory breaks between sessions                   Encouâ€¦</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>state_revenue_24 <span class="ot">=</span> </span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  gambling_html <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="fu">html_table</span>() <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="fu">first</span>() </span></code></pre></div>
<p>Pull in 2025 revenue growth by month</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>revenue_growth_25<span class="ot">=</span> </span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  gambling_html <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="fu">html_table</span>() <span class="sc">|&gt;</span> </span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">pluck</span>(<span class="dv">2</span>)</span></code></pre></div>
<p>We realized website that was scrapped to obtain this data had dynamic
filters that switched the year of the displayed data. To overcome the
lack of static data, we manually scraped the tables for previous years
and saved the data in a CSV format</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># 2018 Data</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>revenue_growth_18 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2018_monthly_revenue.csv&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>state_revenue_18  <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2018_state_revenue.csv&quot;</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co"># 2019 Data</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>revenue_growth_19 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2019_monthly_revenue.csv&quot;</span>)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>state_revenue_19  <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2019_state_revenue.csv&quot;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co"># 2020 Data</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>revenue_growth_20 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2020_monthly_revenue.csv&quot;</span>)</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>state_revenue_20  <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2020_state_revenue.csv&quot;</span>)</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co"># 2021 Data</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>revenue_growth_21 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2021_monthly_revenue.csv&quot;</span>)</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>state_revenue_21  <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2021_state_revenue.csv&quot;</span>)</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co"># 2022 Data</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>revenue_growth_22 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2022_monthly_revenue.csv&quot;</span>)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>state_revenue_22  <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2022_state_revenue.csv&quot;</span>)</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co"># 2023 Data</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>revenue_growth_23 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2023_monthly_revenue.csv&quot;</span>)</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>state_revenue_23  <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2023_state_revenue.csv&quot;</span>)</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="co"># 2024 Data</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>revenue_growth_24 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/gambling_revenue_data/2024_monthly_revenue.csv&quot;</span>)</span></code></pre></div>
<p>Clean the url scraped data so that it matches data types with the
manually scraped data</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># --- Clean Scraped Data to match CSV format ---</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co"># Function to remove &#39;$&#39;, &#39;,&#39; and &#39;%&#39;, convert to numeric and to handle &#39;-&#39; corresponding to missing data</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>clean_money_col <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="co"># Remove currency symbols</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  x_clean <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">&quot;[$,%]&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="co"># Replace dashes or empty strings with NA explicitly</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  x_clean[x_clean <span class="sc">==</span> <span class="st">&quot;-&quot;</span> <span class="sc">|</span> x_clean <span class="sc">==</span> <span class="st">&quot;&quot;</span>] <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>  <span class="fu">as.numeric</span>(x_clean)</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>}</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co"># Clean the Scraped 2024 State Data to match CSV data types</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>state_revenue_24_clean <span class="ot">=</span> state_revenue_24 <span class="sc">|&gt;</span> </span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(Handle, Revenue, Taxes, Hold), clean_money_col), <span class="co"># Convert money columns</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>  )</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="co"># Clean the Scraped 2025 Monthly Data to match CSV data types</span></span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>revenue_growth_25_clean <span class="ot">=</span> revenue_growth_25 <span class="sc">|&gt;</span> </span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(Handle, Revenue, Taxes, Hold), clean_money_col)</span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>  )</span></code></pre></div>
<p>Next, combine the dataset</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># --- Create Master State Revenue File ---</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>total_state_revenue_raw <span class="ot">=</span> <span class="fu">bind_rows</span>(</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  state_revenue_18 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2018</span>, <span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  state_revenue_19 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2019</span>, <span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  state_revenue_20 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2020</span>, <span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  state_revenue_21 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2021</span>, <span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  state_revenue_22 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2022</span>, <span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  state_revenue_23 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2023</span>, <span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>  state_revenue_24_clean <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2024</span>)</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  <span class="fu">relocate</span>(Year, <span class="at">.before =</span> State) <span class="co"># Move Year to the front</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co"># Filter out individual yearly &quot;Total&quot; rows</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>total_state_revenue <span class="ot">=</span> total_state_revenue_raw <span class="sc">|&gt;</span> </span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>  <span class="fu">relocate</span>(Year, <span class="at">.before =</span> State)</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="co"># Calculate the True Grand Total</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>state_grand_total <span class="ot">=</span> total_state_revenue <span class="sc">|&gt;</span> </span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>    <span class="at">Year =</span> <span class="cn">NA</span>, <span class="co"># Grand total spans all years</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a>    <span class="at">State =</span> <span class="st">&quot;Total&quot;</span>,</span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a>    <span class="at">Handle =</span> <span class="fu">sum</span>(Handle, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a>    <span class="at">Revenue =</span> <span class="fu">sum</span>(Revenue, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a>    <span class="at">Taxes =</span> <span class="fu">sum</span>(Taxes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a>    <span class="at">Hold =</span> <span class="fu">sum</span>(Revenue, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sum</span>(Handle, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a>  )</span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a></span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a><span class="co"># Bind the Grand Total to the clean data</span></span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a>final_state_revenue <span class="ot">=</span> <span class="fu">bind_rows</span>(total_state_revenue, state_grand_total)</span>
<span id="cb8-31"><a href="#cb8-31" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" tabindex="-1"></a><span class="co"># --- Create Master Monthly Revenue File ---</span></span>
<span id="cb8-33"><a href="#cb8-33" tabindex="-1"></a>total_revenue_growth_raw <span class="ot">=</span> <span class="fu">bind_rows</span>(</span>
<span id="cb8-34"><a href="#cb8-34" tabindex="-1"></a>  revenue_growth_18 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-35"><a href="#cb8-35" tabindex="-1"></a>  revenue_growth_19 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-36"><a href="#cb8-36" tabindex="-1"></a>  revenue_growth_20 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-37"><a href="#cb8-37" tabindex="-1"></a>  revenue_growth_21 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-38"><a href="#cb8-38" tabindex="-1"></a>  revenue_growth_22 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-39"><a href="#cb8-39" tabindex="-1"></a>  revenue_growth_23 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-40"><a href="#cb8-40" tabindex="-1"></a>  revenue_growth_24 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Hold =</span> Hold <span class="sc">*</span> <span class="dv">100</span>),</span>
<span id="cb8-41"><a href="#cb8-41" tabindex="-1"></a>  revenue_growth_25_clean</span>
<span id="cb8-42"><a href="#cb8-42" tabindex="-1"></a>)</span>
<span id="cb8-43"><a href="#cb8-43" tabindex="-1"></a></span>
<span id="cb8-44"><a href="#cb8-44" tabindex="-1"></a><span class="co"># Filter out individual yearly &quot;Total&quot; rows</span></span>
<span id="cb8-45"><a href="#cb8-45" tabindex="-1"></a>total_revenue_growth <span class="ot">=</span> total_revenue_growth_raw <span class="sc">|&gt;</span> </span>
<span id="cb8-46"><a href="#cb8-46" tabindex="-1"></a>  <span class="fu">filter</span>(Month <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>)</span>
<span id="cb8-47"><a href="#cb8-47" tabindex="-1"></a></span>
<span id="cb8-48"><a href="#cb8-48" tabindex="-1"></a><span class="co"># Calculate the True Grand Total</span></span>
<span id="cb8-49"><a href="#cb8-49" tabindex="-1"></a>monthly_grand_total <span class="ot">=</span> total_revenue_growth <span class="sc">|&gt;</span> </span>
<span id="cb8-50"><a href="#cb8-50" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb8-51"><a href="#cb8-51" tabindex="-1"></a>    <span class="at">Month =</span> <span class="st">&quot;Total&quot;</span>,</span>
<span id="cb8-52"><a href="#cb8-52" tabindex="-1"></a>    <span class="at">Handle =</span> <span class="fu">sum</span>(Handle, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-53"><a href="#cb8-53" tabindex="-1"></a>    <span class="at">Revenue =</span> <span class="fu">sum</span>(Revenue, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-54"><a href="#cb8-54" tabindex="-1"></a>    <span class="at">Taxes =</span> <span class="fu">sum</span>(Taxes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-55"><a href="#cb8-55" tabindex="-1"></a>    <span class="at">Hold =</span> (<span class="fu">sum</span>(Revenue, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sum</span>(Handle, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb8-56"><a href="#cb8-56" tabindex="-1"></a>  )</span>
<span id="cb8-57"><a href="#cb8-57" tabindex="-1"></a></span>
<span id="cb8-58"><a href="#cb8-58" tabindex="-1"></a><span class="co"># Bind the Grand Total to the clean data</span></span>
<span id="cb8-59"><a href="#cb8-59" tabindex="-1"></a>final_revenue_growth <span class="ot">=</span> <span class="fu">bind_rows</span>(total_revenue_growth, monthly_grand_total)</span></code></pre></div>
<p>Save the relevant gambling datasets</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">write.csv</span>(total_state_revenue, <span class="st">&quot;data/total_state_revenue.csv&quot;</span>) <span class="co"># state totals only</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">write.csv</span>(final_state_revenue, <span class="st">&quot;data/final_state_revenue.csv&quot;</span>) <span class="co"># totals mapped to raw data</span></span></code></pre></div>
</div>
<div id="demographics" class="section level2">
<h2>Demographics</h2>
<p>We utilize the tidycensus package to pull 2024 ACS data for all
states</p>
<p>Base Stats (Pop/Income)</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>vars_base <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="at">median_income =</span> <span class="st">&quot;B19013_001&quot;</span>,</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="at">total_pop =</span> <span class="st">&quot;B01003_001&quot;</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>acs_base_2024 <span class="ot">=</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>  <span class="fu">get_acs</span>(</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>    <span class="at">variables =</span> vars_base,</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>    <span class="at">year =</span> <span class="dv">2024</span>,</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>    <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>  <span class="fu">select</span>(NAME, variable, estimate) <span class="sc">|&gt;</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable, <span class="at">values_from =</span> estimate) <span class="sc">|&gt;</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span></code></pre></div>
<p>Educational Attainment</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Pull raw ACS education data</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>educ_2024 <span class="ot">=</span> <span class="fu">get_acs</span>(</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>    <span class="at">total =</span> <span class="st">&quot;B15003_001&quot;</span>,    <span class="co"># total population age 25+</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>    <span class="at">ba1 =</span> <span class="st">&quot;B15003_022&quot;</span>,      <span class="co"># BA degree</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>    <span class="at">ba2 =</span> <span class="st">&quot;B15003_023&quot;</span>,      <span class="co"># Master&#39;s</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>    <span class="at">ba3 =</span> <span class="st">&quot;B15003_024&quot;</span>,      <span class="co"># Professional degree</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>    <span class="at">ba4 =</span> <span class="st">&quot;B15003_025&quot;</span>       <span class="co"># Doctorate</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  ),</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>)</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co"># Clean + compute % bachelorâ€™s degree or higher</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>educ_clean_2024 <span class="ot">=</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a>  educ_2024 <span class="sc">|&gt;</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">|&gt;</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>    <span class="at">total =</span> estimate[variable <span class="sc">==</span> <span class="st">&quot;total&quot;</span>],</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a>    <span class="at">ba_plus =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;ba1&quot;</span>, <span class="st">&quot;ba2&quot;</span>, <span class="st">&quot;ba3&quot;</span>, <span class="st">&quot;ba4&quot;</span>)]),</span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span></span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_bachelors =</span> ba_plus <span class="sc">/</span> total)</span></code></pre></div>
<p>Age Distribution</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>age_2024 <span class="ot">=</span> <span class="fu">get_acs</span>(</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    <span class="at">total =</span> <span class="st">&quot;B01001_001&quot;</span>,</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    <span class="at">male_20_34 =</span> <span class="fu">paste0</span>(<span class="st">&quot;B01001_&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%03d&quot;</span>, <span class="dv">8</span><span class="sc">:</span><span class="dv">10</span>)),</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="at">female_20_34 =</span> <span class="fu">paste0</span>(<span class="st">&quot;B01001_&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%03d&quot;</span>, <span class="dv">32</span><span class="sc">:</span><span class="dv">34</span>))</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>  ),</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>)</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>age_clean_2024 <span class="ot">=</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>  age_2024 <span class="sc">|&gt;</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">case_when</span>(</span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a>      variable <span class="sc">==</span> <span class="st">&quot;total&quot;</span> <span class="sc">~</span> <span class="st">&quot;total&quot;</span>,</span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a>      <span class="fu">str_starts</span>(variable, <span class="st">&quot;male_20_34&quot;</span>) <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a>      <span class="fu">str_starts</span>(variable, <span class="st">&quot;female_20_34&quot;</span>) <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a>    )</span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(group)) <span class="sc">|&gt;</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME, group) <span class="sc">|&gt;</span></span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">estimate =</span> <span class="fu">sum</span>(estimate), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> group, <span class="at">values_from =</span> estimate) <span class="sc">|&gt;</span></span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_age_20_34 =</span> young <span class="sc">/</span> total)</span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a>median_age_2024 <span class="ot">=</span> <span class="fu">get_acs</span>(</span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(<span class="at">median_age =</span> <span class="st">&quot;B01002_001&quot;</span>),</span>
<span id="cb12-31"><a href="#cb12-31" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb12-32"><a href="#cb12-32" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb12-33"><a href="#cb12-33" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb12-34"><a href="#cb12-34" tabindex="-1"></a>  <span class="fu">select</span>(NAME, <span class="at">median_age =</span> estimate)</span></code></pre></div>
<p>Urbanization</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>urban_raw <span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">&quot;data/Census_Urbanization_Data/DECENNIALDHC2020.P2-Data.csv&quot;</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>urban_clean_2020 <span class="ot">=</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  urban_raw <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(GEO_ID, <span class="st">&quot;^040&quot;</span>)) <span class="sc">|&gt;</span>                      <span class="co"># keep States only</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    <span class="at">State =</span> NAME,</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">as.numeric</span>(P2_001N),</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>    <span class="at">urban =</span> <span class="fu">as.numeric</span>(P2_002N),</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>    <span class="at">rural =</span> <span class="fu">as.numeric</span>(P2_003N),</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>    <span class="at">pct_urban =</span> urban <span class="sc">/</span> total,</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>    <span class="at">pct_rural =</span> rural <span class="sc">/</span> total</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>  )</span></code></pre></div>
<p>Poverty &amp; Unemployment</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>poverty_2024 <span class="ot">=</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="fu">get_acs</span>(</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>    <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="at">variables =</span> <span class="fu">c</span>(<span class="at">total =</span> <span class="st">&quot;B17001_001&quot;</span>,</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>                  <span class="at">below_pov =</span> <span class="st">&quot;B17001_002&quot;</span>),</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>    <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>  )</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>poverty_clean_2024 <span class="ot">=</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>  poverty_2024 <span class="sc">|&gt;</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">|&gt;</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;total&quot;</span>]),</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>    <span class="at">poverty =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;below_pov&quot;</span>]),</span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>    <span class="at">pct_poverty =</span> poverty <span class="sc">/</span> total</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Unemployment rate</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>unemp_2024 <span class="ot">=</span> <span class="fu">get_acs</span>(</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>    <span class="at">labor_force =</span> <span class="st">&quot;B23025_003&quot;</span>,   <span class="co"># In labor force</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>    <span class="at">unemployed =</span> <span class="st">&quot;B23025_005&quot;</span>     <span class="co"># Unemployed</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>  ),</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>)</span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a>unemp_clean_2024 <span class="ot">=</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a>  unemp_2024 <span class="sc">|&gt;</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">|&gt;</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a>    <span class="at">labor_force =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;labor_force&quot;</span>]),</span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a>    <span class="at">unemployed =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;unemployed&quot;</span>]),</span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span></span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">unemployment_rate =</span> unemployed <span class="sc">/</span> labor_force)</span></code></pre></div>
<p>Racial Composition</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>race_2024 <span class="ot">=</span> <span class="fu">get_acs</span>(</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>    <span class="at">total =</span> <span class="st">&quot;B02001_001&quot;</span>,</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>    <span class="at">white =</span> <span class="st">&quot;B02001_002&quot;</span>,</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>    <span class="at">black =</span> <span class="st">&quot;B02001_003&quot;</span>,</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>    <span class="at">asian =</span> <span class="st">&quot;B02001_005&quot;</span>,</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>    <span class="at">hispanic =</span> <span class="st">&quot;B03003_003&quot;</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>  ),</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>)</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>race_clean_2024 <span class="ot">=</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a>  race_2024 <span class="sc">|&gt;</span></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">|&gt;</span></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;total&quot;</span>]),</span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a>    <span class="at">white =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;white&quot;</span>]),</span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a>    <span class="at">black =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;black&quot;</span>]),</span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a>    <span class="at">asian =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;asian&quot;</span>]),</span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a>    <span class="at">hispanic =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;hispanic&quot;</span>]),</span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span></span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a>    <span class="at">pct_white =</span> white <span class="sc">/</span> total,</span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a>    <span class="at">pct_black =</span> black <span class="sc">/</span> total,</span>
<span id="cb16-28"><a href="#cb16-28" tabindex="-1"></a>    <span class="at">pct_asian =</span> asian <span class="sc">/</span> total,</span>
<span id="cb16-29"><a href="#cb16-29" tabindex="-1"></a>    <span class="at">pct_hispanic =</span> hispanic <span class="sc">/</span> total</span>
<span id="cb16-30"><a href="#cb16-30" tabindex="-1"></a>  )</span></code></pre></div>
<p>Gender</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># % Male</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>sex_2024 <span class="ot">=</span> <span class="fu">get_acs</span>(</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>    <span class="at">male =</span> <span class="st">&quot;B01001_002&quot;</span>,</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    <span class="at">total =</span> <span class="st">&quot;B01001_001&quot;</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>  ),</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>)</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>sex_clean_2024 <span class="ot">=</span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>  sex_2024 <span class="sc">|&gt;</span></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">|&gt;</span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a>    <span class="at">male =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;male&quot;</span>]),</span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;total&quot;</span>]),</span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_male =</span> male <span class="sc">/</span> total)</span></code></pre></div>
<p>Additional Indicators</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>internet_2024 <span class="ot">=</span> <span class="fu">get_acs</span>(</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>    <span class="at">total =</span> <span class="st">&quot;B28002_001&quot;</span>,</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>    <span class="at">broadband =</span> <span class="st">&quot;B28002_004&quot;</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>  ),</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>)</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>internet_clean_2024 <span class="ot">=</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>  internet_2024 <span class="sc">|&gt;</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">|&gt;</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;total&quot;</span>]),</span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a>    <span class="at">broadband =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;broadband&quot;</span>]),</span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_broadband =</span> broadband <span class="sc">/</span> total)</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># here is the def if you do not know what this is: The Gini index, or Gini coefficient, is a measure of income, wealth, or consumption inequality within a population, ranging from 0 (perfect equality) to 1 (perfect inequality)</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>gini_2024 <span class="ot">=</span> <span class="fu">get_acs</span>(</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(<span class="at">gini =</span> <span class="st">&quot;B19083_001&quot;</span>),</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>  <span class="fu">select</span>(NAME, <span class="at">gini =</span> estimate)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>rent_2024 <span class="ot">=</span> <span class="fu">get_acs</span>(</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">&quot;state&quot;</span>,</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>    <span class="at">total =</span> <span class="st">&quot;B25003_001&quot;</span>,</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>    <span class="at">owner =</span> <span class="st">&quot;B25003_002&quot;</span>,</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>    <span class="at">renter =</span> <span class="st">&quot;B25003_003&quot;</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>  ),</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2024</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>)</span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>rent_clean_2024 <span class="ot">=</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>  rent_2024 <span class="sc">|&gt;</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">|&gt;</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;total&quot;</span>]),</span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a>    <span class="at">owner =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;owner&quot;</span>]),</span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>    <span class="at">renter =</span> <span class="fu">sum</span>(estimate[variable <span class="sc">==</span> <span class="st">&quot;renter&quot;</span>]),</span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span></span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a>    <span class="at">pct_rent =</span> renter <span class="sc">/</span> total,</span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a>    <span class="at">pct_own =</span> owner <span class="sc">/</span> total</span>
<span id="cb20-24"><a href="#cb20-24" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="merge-into-final-sports-gambling-dataset"
class="section level2">
<h2>Merge into final sports gambling dataset</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co">#Rename so all are State</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>acs_base_2024 <span class="ot">=</span> acs_base_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> name)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>educ_clean_2024 <span class="ot">=</span> educ_clean_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>age_clean_2024 <span class="ot">=</span> age_clean_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>poverty_clean_2024 <span class="ot">=</span> poverty_clean_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>sex_clean_2024 <span class="ot">=</span> sex_clean_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>unemp_clean_2024 <span class="ot">=</span> unemp_clean_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>race_clean_2024 <span class="ot">=</span> race_clean_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>median_age_2024 <span class="ot">=</span> median_age_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>internet_clean_2024 <span class="ot">=</span> internet_clean_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>gini_2024 <span class="ot">=</span> gini_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>rent_clean_2024 <span class="ot">=</span> rent_clean_2024 <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">State =</span> NAME)</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a><span class="co"># Final combined demographic dataset</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>demographics_2024 <span class="ot">=</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>  acs_base_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>  <span class="fu">left_join</span>(educ_clean_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>              <span class="fu">select</span>(State, pct_bachelors), </span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>  <span class="fu">left_join</span>(age_clean_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a>              <span class="fu">select</span>(State, pct_age_20_34), </span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a>  <span class="fu">left_join</span>(urban_clean_2020 <span class="sc">|&gt;</span> </span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a>              <span class="fu">select</span>(State, pct_urban, pct_rural), </span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a>  <span class="fu">left_join</span>(poverty_clean_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a>              <span class="fu">select</span>(State, pct_poverty), </span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a>  <span class="fu">left_join</span>(sex_clean_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a>              <span class="fu">select</span>(State, pct_male), </span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a>  <span class="fu">left_join</span>(unemp_clean_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a>              <span class="fu">select</span>(State, unemployment_rate), </span>
<span id="cb21-34"><a href="#cb21-34" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-35"><a href="#cb21-35" tabindex="-1"></a>  <span class="fu">left_join</span>(race_clean_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-36"><a href="#cb21-36" tabindex="-1"></a>              <span class="fu">select</span>(State, pct_white, pct_black, pct_asian, pct_hispanic), </span>
<span id="cb21-37"><a href="#cb21-37" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-38"><a href="#cb21-38" tabindex="-1"></a>  <span class="fu">left_join</span>(median_age_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-39"><a href="#cb21-39" tabindex="-1"></a>              <span class="fu">select</span>(State, median_age), </span>
<span id="cb21-40"><a href="#cb21-40" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-41"><a href="#cb21-41" tabindex="-1"></a>  <span class="fu">left_join</span>(internet_clean_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-42"><a href="#cb21-42" tabindex="-1"></a>              <span class="fu">select</span>(State, pct_broadband), </span>
<span id="cb21-43"><a href="#cb21-43" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-44"><a href="#cb21-44" tabindex="-1"></a>  <span class="fu">left_join</span>(gini_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-45"><a href="#cb21-45" tabindex="-1"></a>              <span class="fu">select</span>(State, gini), </span>
<span id="cb21-46"><a href="#cb21-46" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-47"><a href="#cb21-47" tabindex="-1"></a>  <span class="fu">left_join</span>(rent_clean_2024 <span class="sc">|&gt;</span> </span>
<span id="cb21-48"><a href="#cb21-48" tabindex="-1"></a>              <span class="fu">select</span>(State, pct_rent, pct_own), </span>
<span id="cb21-49"><a href="#cb21-49" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;State&quot;</span>)</span>
<span id="cb21-50"><a href="#cb21-50" tabindex="-1"></a></span>
<span id="cb21-51"><a href="#cb21-51" tabindex="-1"></a><span class="co"># Merge with gambling revenue</span></span>
<span id="cb21-52"><a href="#cb21-52" tabindex="-1"></a>revenue_2024 <span class="ot">=</span></span>
<span id="cb21-53"><a href="#cb21-53" tabindex="-1"></a>  final_state_revenue <span class="sc">|&gt;</span></span>
<span id="cb21-54"><a href="#cb21-54" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2024</span>, State <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-55"><a href="#cb21-55" tabindex="-1"></a>  <span class="fu">select</span>(State, Revenue, Handle, Taxes, Hold)</span>
<span id="cb21-56"><a href="#cb21-56" tabindex="-1"></a></span>
<span id="cb21-57"><a href="#cb21-57" tabindex="-1"></a>model_data_2024 <span class="ot">=</span></span>
<span id="cb21-58"><a href="#cb21-58" tabindex="-1"></a>  revenue_2024 <span class="sc">|&gt;</span></span>
<span id="cb21-59"><a href="#cb21-59" tabindex="-1"></a>  <span class="fu">left_join</span>(demographics_2024, <span class="at">by =</span> <span class="st">&quot;State&quot;</span>)</span></code></pre></div>
<p>Look at final dataset.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co">#view(demographics_2024)</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="fu">summary</span>(demographics_2024)</span></code></pre></div>
<pre><code>##     State             total_pop        median_income    pct_bachelors   
##  Length:52          Min.   :  587618   Min.   : 27213   Min.   :0.2438  
##  Class :character   1st Qu.: 1943709   1st Qu.: 72316   1st Qu.:0.3233  
##  Mode  :character   Median : 4430372   Median : 77803   Median :0.3560  
##                     Mean   : 6602198   Mean   : 80424   Mean   :0.3625  
##                     3rd Qu.: 7676333   3rd Qu.: 88673   3rd Qu.:0.3915  
##                     Max.   :39431263   Max.   :109707   Max.   :0.6546  
##  pct_age_20_34       pct_urban        pct_rural       pct_poverty     
##  Min.   :0.05403   Min.   :0.3512   Min.   :0.0000   Min.   :0.07205  
##  1st Qu.:0.06333   1st Qu.:0.6425   1st Qu.:0.1389   1st Qu.:0.10149  
##  Median :0.06591   Median :0.7324   Median :0.2676   Median :0.11579  
##  Mean   :0.06580   Mean   :0.7334   Mean   :0.2666   Mean   :0.12441  
##  3rd Qu.:0.06819   3rd Qu.:0.8611   3rd Qu.:0.3575   3rd Qu.:0.13418  
##  Max.   :0.08744   Max.   :1.0000   Max.   :0.6488   Max.   :0.37308  
##     pct_male      unemployment_rate   pct_white        pct_black       
##  Min.   :0.4729   Min.   :0.01910   Min.   :0.2195   Min.   :0.003091  
##  1st Qu.:0.4910   1st Qu.:0.03659   1st Qu.:0.5621   1st Qu.:0.036199  
##  Median :0.4951   Median :0.04345   Median :0.6745   Median :0.069857  
##  Mean   :0.4960   Mean   :0.04332   Mean   :0.6569   Mean   :0.106106  
##  3rd Qu.:0.5006   3rd Qu.:0.04891   3rd Qu.:0.7751   3rd Qu.:0.141908  
##  Max.   :0.5273   Max.   :0.08448   Max.   :0.9011   Max.   :0.413152  
##    pct_asian         pct_hispanic       median_age    pct_broadband   
##  Min.   :0.001707   Min.   :0.02317   Min.   :32.50   Min.   :0.8626  
##  1st Qu.:0.019852   1st Qu.:0.06562   1st Qu.:38.62   1st Qu.:0.9161  
##  Median :0.030595   Median :0.11586   Median :39.40   Median :0.9280  
##  Mean   :0.046410   Mean   :0.15332   Mean   :39.64   Mean   :0.9254  
##  3rd Qu.:0.050288   3rd Qu.:0.17378   3rd Qu.:40.73   3rd Qu.:0.9368  
##  Max.   :0.362609   Max.   :0.98877   Max.   :45.40   Max.   :0.9529  
##       gini           pct_rent         pct_own      
##  Min.   :0.4222   Min.   :0.2449   Min.   :0.4090  
##  1st Qu.:0.4556   1st Qu.:0.2922   1st Qu.:0.6588  
##  Median :0.4665   Median :0.3201   Median :0.6799  
##  Mean   :0.4670   Mean   :0.3295   Mean   :0.6705  
##  3rd Qu.:0.4747   3rd Qu.:0.3412   3rd Qu.:0.7078  
##  Max.   :0.5338   Max.   :0.5910   Max.   :0.7551</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">glimpse</span>(demographics_2024)</span></code></pre></div>
<pre><code>## Rows: 52
## Columns: 19
## $ State             &lt;chr&gt; &quot;Alabama&quot;, &quot;Alaska&quot;, &quot;Arizona&quot;, &quot;Arkansas&quot;, &quot;Califorâ€¦
## $ total_pop         &lt;dbl&gt; 5157699, 740133, 7582384, 3088354, 39431263, 5957494â€¦
## $ median_income     &lt;dbl&gt; 66659, 95665, 81486, 62106, 100149, 97113, 96049, 87â€¦
## $ pct_bachelors     &lt;dbl&gt; 0.2985358, 0.3275460, 0.3473430, 0.2711732, 0.381236â€¦
## $ pct_age_20_34     &lt;dbl&gt; 0.06431007, 0.06822828, 0.06858898, 0.06647845, 0.06â€¦
## $ pct_urban         &lt;dbl&gt; 0.5773724, 0.6489949, 0.8928516, 0.5547613, 0.942366â€¦
## $ pct_rural         &lt;dbl&gt; 0.42262760, 0.35100513, 0.10714840, 0.44523869, 0.05â€¦
## $ pct_poverty       &lt;dbl&gt; 0.15188039, 0.10166801, 0.11680530, 0.15535744, 0.11â€¦
## $ pct_male          &lt;dbl&gt; 0.4828803, 0.5273390, 0.4989042, 0.4913705, 0.498972â€¦
## $ unemployment_rate &lt;dbl&gt; 0.04231466, 0.05961084, 0.04563755, 0.03817759, 0.05â€¦
## $ pct_white         &lt;dbl&gt; 0.6401166, 0.5870837, 0.5731275, 0.6818985, 0.380758â€¦
## $ pct_black         &lt;dbl&gt; 0.252458897, 0.025060361, 0.047592947, 0.141759980, â€¦
## $ pct_asian         &lt;dbl&gt; 0.01543111, 0.05955281, 0.03992623, 0.01786842, 0.16â€¦
## $ pct_hispanic      &lt;dbl&gt; 0.05951607, 0.07732259, 0.32122628, 0.09541361, 0.40â€¦
## $ median_age        &lt;dbl&gt; 39.6, 36.3, 39.4, 39.1, 38.4, 38.0, 41.2, 42.1, 34.9â€¦
## $ pct_broadband     &lt;dbl&gt; 0.9164410, 0.9359704, 0.9355612, 0.9076009, 0.950047â€¦
## $ gini              &lt;dbl&gt; 0.4745, 0.4395, 0.4623, 0.4721, 0.4852, 0.4611, 0.49â€¦
## $ pct_rent          &lt;dbl&gt; 0.2904826, 0.3348100, 0.3224346, 0.3288997, 0.441797â€¦
## $ pct_own           &lt;dbl&gt; 0.7095174, 0.6651900, 0.6775654, 0.6711003, 0.558202â€¦</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co">#view(model_data_2024)</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="fu">summary</span>(model_data_2024)</span></code></pre></div>
<pre><code>##     State              Revenue              Handle              Taxes          
##  Length:39          Min.   :9.209e+05   Min.   :9.237e+06   Min.   :8.288e+04  
##  Class :character   1st Qu.:5.414e+07   1st Qu.:5.132e+08   1st Qu.:8.523e+06  
##  Mode  :character   Median :2.453e+08   Median :3.235e+09   Median :3.224e+07  
##                     Mean   :4.095e+08   Mean   :4.669e+09   Mean   :8.348e+07  
##                     3rd Qu.:5.592e+08   3rd Qu.:7.045e+09   3rd Qu.:8.977e+07  
##                     Max.   :2.059e+09   Max.   :2.295e+10   Max.   :1.050e+09  
##                     NA&#39;s   :5           NA&#39;s   :7           NA&#39;s   :5          
##       Hold          total_pop        median_income    pct_bachelors   
##  Min.   : 5.530   Min.   :  587618   Min.   : 59127   Min.   :0.2438  
##  1st Qu.: 8.693   1st Qu.: 1828851   1st Qu.: 72256   1st Qu.:0.3230  
##  Median : 9.610   Median : 4430372   Median : 77213   Median :0.3591  
##  Mean   : 9.639   Mean   : 5877058   Mean   : 80034   Mean   :0.3606  
##  3rd Qu.:10.773   3rd Qu.: 7864231   3rd Qu.: 85670   3rd Qu.:0.4057  
##  Max.   :13.960   Max.   :23372215   Max.   :104828   Max.   :0.4827  
##  NA&#39;s   :7        NA&#39;s   :1          NA&#39;s   :1        NA&#39;s   :1       
##  pct_age_20_34       pct_urban        pct_rural        pct_poverty     
##  Min.   :0.05403   Min.   :0.3512   Min.   :0.05908   Min.   :0.07205  
##  1st Qu.:0.06180   1st Qu.:0.6123   1st Qu.:0.14076   1st Qu.:0.10120  
##  Median :0.06545   Median :0.7324   Median :0.26760   Median :0.11578  
##  Mean   :0.06491   Mean   :0.7186   Mean   :0.28143   Mean   :0.11909  
##  3rd Qu.:0.06752   3rd Qu.:0.8592   3rd Qu.:0.38770   3rd Qu.:0.12642  
##  Max.   :0.07733   Max.   :0.9409   Max.   :0.64880   Max.   :0.18688  
##  NA&#39;s   :1         NA&#39;s   :1        NA&#39;s   :1         NA&#39;s   :1        
##     pct_male      unemployment_rate   pct_white        pct_black       
##  Min.   :0.4818   Min.   :0.01910   Min.   :0.4635   Min.   :0.003091  
##  1st Qu.:0.4914   1st Qu.:0.03476   1st Qu.:0.5845   1st Qu.:0.038399  
##  Median :0.4943   Median :0.04311   Median :0.7066   Median :0.081159  
##  Mean   :0.4961   Mean   :0.04176   Mean   :0.6934   Mean   :0.100325  
##  3rd Qu.:0.5005   3rd Qu.:0.04872   3rd Qu.:0.7934   3rd Qu.:0.139359  
##  Max.   :0.5137   Max.   :0.06283   Max.   :0.9011   Max.   :0.358802  
##  NA&#39;s   :1        NA&#39;s   :1         NA&#39;s   :1        NA&#39;s   :1         
##    pct_asian         pct_hispanic       median_age    pct_broadband   
##  Min.   :0.007063   Min.   :0.02317   Min.   :36.70   Min.   :0.8833  
##  1st Qu.:0.019519   1st Qu.:0.05517   1st Qu.:39.10   1st Qu.:0.9128  
##  Median :0.028946   Median :0.11309   Median :39.65   Median :0.9264  
##  Mean   :0.038988   Mean   :0.13199   Mean   :40.07   Mean   :0.9253  
##  3rd Qu.:0.048242   3rd Qu.:0.17969   3rd Qu.:40.95   3rd Qu.:0.9394  
##  Max.   :0.107183   Max.   :0.49114   Max.   :44.90   Max.   :0.9529  
##  NA&#39;s   :1          NA&#39;s   :1         NA&#39;s   :1       NA&#39;s   :1       
##       gini           pct_rent         pct_own      
##  Min.   :0.4357   Min.   :0.2449   Min.   :0.5432  
##  1st Qu.:0.4561   1st Qu.:0.2933   1st Qu.:0.6667  
##  Median :0.4661   Median :0.3198   Median :0.6802  
##  Mean   :0.4667   Mean   :0.3227   Mean   :0.6773  
##  3rd Qu.:0.4742   3rd Qu.:0.3333   3rd Qu.:0.7067  
##  Max.   :0.5186   Max.   :0.4568   Max.   :0.7551  
##  NA&#39;s   :1        NA&#39;s   :1        NA&#39;s   :1</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">glimpse</span>(model_data_2024)</span></code></pre></div>
<pre><code>## Rows: 39
## Columns: 23
## $ State             &lt;chr&gt; &quot;Arizona&quot;, &quot;Arkansas&quot;, &quot;Colorado&quot;, &quot;Connecticut&quot;, &quot;Dâ€¦
## $ Revenue           &lt;dbl&gt; 427397087, 107275202, 475176731, 187349516, 14585100â€¦
## $ Handle            &lt;dbl&gt; 7959647194, NA, 6187564044, 2188745557, 216240459, Nâ€¦
## $ Taxes             &lt;dbl&gt; 42739709, 13945776, 31934112, 25760559, 8474813, NA,â€¦
## $ Hold              &lt;dbl&gt; 5.53, NA, 7.87, 8.67, 6.99, NA, 13.52, 9.48, 8.07, 5â€¦
## $ total_pop         &lt;dbl&gt; 7582384, 3088354, 5957494, 3675069, 1051917, 2337221â€¦
## $ median_income     &lt;dbl&gt; 81486, 62106, 97113, 96049, 87534, 77735, 83211, 719â€¦
## $ pct_bachelors     &lt;dbl&gt; 0.3473430, 0.2711732, 0.4776638, 0.4256536, 0.359915â€¦
## $ pct_age_20_34     &lt;dbl&gt; 0.06858898, 0.06647845, 0.06598143, 0.06532394, 0.06â€¦
## $ pct_urban         &lt;dbl&gt; 0.8928516, 0.5547613, 0.8602671, 0.8625073, 0.826121â€¦
## $ pct_rural         &lt;dbl&gt; 0.10714840, 0.44523869, 0.13973293, 0.13749271, 0.17â€¦
## $ pct_poverty       &lt;dbl&gt; 0.11680530, 0.15535744, 0.09601167, 0.10195637, 0.09â€¦
## $ pct_male          &lt;dbl&gt; 0.4989042, 0.4913705, 0.5063738, 0.4911189, 0.481751â€¦
## $ unemployment_rate &lt;dbl&gt; 0.04563755, 0.03817759, 0.04277032, 0.04948289, 0.05â€¦
## $ pct_white         &lt;dbl&gt; 0.5731275, 0.6818985, 0.6935989, 0.6369799, 0.581658â€¦
## $ pct_black         &lt;dbl&gt; 0.047592947, 0.141759980, 0.042512338, 0.107578388, â€¦
## $ pct_asian         &lt;dbl&gt; 0.039926229, 0.017868418, 0.034834445, 0.048035561, â€¦
## $ pct_hispanic      &lt;dbl&gt; 0.32122628, 0.09541361, 0.23213586, 0.19232455, 0.11â€¦
## $ median_age        &lt;dbl&gt; 39.4, 39.1, 38.0, 41.2, 42.1, 42.7, 39.4, 38.3, 39.0â€¦
## $ pct_broadband     &lt;dbl&gt; 0.9355612, 0.9076009, 0.9489518, 0.9403395, 0.942886â€¦
## $ gini              &lt;dbl&gt; 0.4623, 0.4721, 0.4611, 0.4989, 0.4478, 0.4799, 0.48â€¦
## $ pct_rent          &lt;dbl&gt; 0.3224346, 0.3288997, 0.3405580, 0.3332788, 0.262221â€¦
## $ pct_own           &lt;dbl&gt; 0.6775654, 0.6711003, 0.6594420, 0.6667212, 0.737778â€¦</code></pre>
<p>Clean final dataset.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>model_clean_2024 <span class="ot">&lt;-</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>  model_data_2024 <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>  <span class="fu">drop_na</span>(Revenue, Handle, Taxes, Hold)</span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="co">#See final Amount</span></span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a><span class="fu">nrow</span>(model_clean_2024)</span></code></pre></div>
<pre><code>## [1] 32</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">unique</span>(model_clean_2024<span class="sc">$</span>State)</span></code></pre></div>
<pre><code>##  [1] &quot;Arizona&quot;         &quot;Colorado&quot;        &quot;Connecticut&quot;     &quot;Delaware&quot;       
##  [5] &quot;Illinois&quot;        &quot;Indiana&quot;         &quot;Iowa&quot;            &quot;Kansas&quot;         
##  [9] &quot;Kentucky&quot;        &quot;Louisiana&quot;       &quot;Maine&quot;           &quot;Maryland&quot;       
## [13] &quot;Massachusetts&quot;   &quot;Michigan&quot;        &quot;Mississippi&quot;     &quot;Montana&quot;        
## [17] &quot;Nevada&quot;          &quot;New Hampshire&quot;   &quot;New Jersey&quot;      &quot;New York&quot;       
## [21] &quot;North Carolina&quot;  &quot;Ohio&quot;            &quot;Oregon&quot;          &quot;Pennsylvania&quot;   
## [25] &quot;Rhode Island&quot;    &quot;South Dakota&quot;    &quot;Tennessee&quot;       &quot;Vermont&quot;        
## [29] &quot;Virginia&quot;        &quot;Washington D.C.&quot; &quot;West Virginia&quot;   &quot;Wyoming&quot;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="co">#See who was dropped</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="fu">anti_join</span>(model_data_2024, model_clean_2024, <span class="at">by =</span> <span class="st">&quot;State&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a>  <span class="fu">select</span>(State)</span></code></pre></div>
<pre><code>## # A tibble: 7 Ã— 1
##   State       
##   &lt;chr&gt;       
## 1 Arkansas    
## 2 Florida     
## 3 Missouri    
## 4 Nebraska    
## 5 New Mexico  
## 6 North Dakota
## 7 Washington</code></pre>
<p>Save final datasets.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">write.csv</span>(model_clean_2024, <span class="st">&quot;data/model_clean_2024.csv&quot;</span>)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="fu">write.csv</span>(demographics_2024, <span class="st">&quot;data/demographics_2024.csv&quot;</span>)</span></code></pre></div>
<p>Go back <a href="home.html">home</a></p>
</div>

<footer class="site-footer">
  <div class="footer-content">
    
    <p class="footer-team">
      Team: Zakari, Kimia, Lawrence & Sukhman
    </p>
    
    <p class="footer-links">
      <a href="https://github.com/zakbillo/sports-betting" target="_blank">
        <i class="fa fa-github fa-lg"></i> View Our Source Code
      </a>
    </p>
    
    <p class="footer-quote">
      "The house always wins... usually."
    </p>
    
    <div class="footer-copyright">
      2025 Data Science I (P8105) Final Project
    </div>

  </div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
